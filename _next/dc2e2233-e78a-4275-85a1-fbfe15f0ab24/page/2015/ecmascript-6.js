module.exports=__NEXT_REGISTER_PAGE("/2015/ecmascript-6",function(){return{page:webpackJsonp([2],{16:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(0),o=a.n(r);t.a=function(e){var t=e.children;return o.a.createElement("code",{className:"jsx-4056748551"},t,o.a.createElement(l.a,{styleId:"4056748551",css:["code.jsx-4056748551{color:#666;font-family:monospace;}"]}))}},28:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(0),o=a.n(r);t.a=function(e){var t=e.by,a=e.children;return o.a.createElement("blockquote",{className:"jsx-847609887"},o.a.createElement("p",{className:"jsx-847609887"},a,o.a.createElement("br",{className:"jsx-847609887"}),t&&"– ".concat(t)),o.a.createElement(l.a,{styleId:"847609887",css:["blockquote.jsx-847609887{margin:30px 0;color:#9B9B9B;font-style:oblique;font-size:12px;}","p.jsx-847609887{line-height:24px;}"]}))}},29:function(e,t,a){"use strict";var n=a(1),l=a.n(n),r=a(0),o=a.n(r);t.a=function(e){var t=e.children;return o.a.createElement("pre",{className:"jsx-815773015"},o.a.createElement("code",{className:"jsx-815773015"},t),o.a.createElement(l.a,{styleId:"815773015",css:["pre.jsx-815773015{line-height:20px;margin-bottom:20px;font-size:12px;}","code.jsx-815773015{color:#999;}"]}))}},30:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return c}),a.d(t,"b",function(){return u});var n=a(1),l=a.n(n),r=a(0),o=a.n(r),i=a(13),s=function(e){var t=e.children;return o.a.createElement("div",{className:"jsx-1193587053"},t,o.a.createElement(l.a,{styleId:"1193587053",css:["div.jsx-1193587053::before{width:200px;content:' ';margin:auto;border-top:1px solid #ccc;padding-top:40px;display:block;margin-top:40px;}"]}))},c=function(e){var t=e.id;return o.a.createElement("a",{href:"#f".concat(t),id:"s".concat(t),className:"jsx-65788776"},"[",t,"]",o.a.createElement(l.a,{styleId:"65788776",css:["a.jsx-65788776{top:-5px;font-size:10px;position:relative;-webkit-text-decoration:none;text-decoration:none;}"]}))},u=function(e){var t=e.id,a=e.children;return o.a.createElement(i.a,null,t,"."," ",o.a.createElement("a",{href:"#s".concat(t),id:"f".concat(t),className:"jsx-498768774"},"^")," ",a,o.a.createElement(l.a,{styleId:"498768774",css:["a.jsx-498768774{-webkit-text-decoration:none;text-decoration:none;}"]}))}},310:function(e,t,a){e.exports=a(311)},311:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(0),l=a.n(n),r=a(15),o=a.n(r),i=a(36),s=a(13),c=a(37),u=a(38),m=a(28),h=a(52),d=a(30),f=a(16),p=a(29),g=a(39);t.default=Object(g.a)(function(e){var t=e.views;return l.a.createElement(i.a,null,l.a.createElement(o.a,null,l.a.createElement("title",null,"ECMAScript 6")),l.a.createElement(c.a,null,"ECMAScript 6"),l.a.createElement(u.a,{date:"February 22, 2015",views:t}),l.a.createElement(m.a,{by:"Ludwig Wittgenstein"},"The limits of my language mean the limits of my world."),l.a.createElement(s.a,null,"For the past few months I’ve been exclusively writing ECMAScript 6 code by taking advantage of transpilation",l.a.createElement(d.c,{id:"1"})," to a currently supported version of JavaScript."),l.a.createElement(s.a,null,"ECMAScript 6, henceforth ES6 and formerly ES.next, is the latest version of the specification. As of August 2014 no new features are being discussed, but details and edge cases are still being sorted out. It’s expected to be completed and published mid-2015."),l.a.createElement(s.a,null,"Adopting ES6 has simultaneously resulted in increased productivity (by making my code more succinct) and eliminated entire classes of bugs by addressing common JavaScript gotchas."),l.a.createElement(s.a,null,"More importantly, however, it’s reaffirmed my belief in an evolutionary approach towards language and software design as opposed to ",l.a.createElement("a",{href:E[1],target:"_blank"},"clean-slate recreation")),l.a.createElement(s.a,null,"This should be fairly obvious to you if you’ve been using CoffeeScript, which set out to focus on the good parts of JS and hide the broken ones. ES6 has been able to adopt a lot of CoffeeScript’s great innovations in a non-disruptive way, to such an extent that some have even questioned its ",l.a.createElement("a",{href:E[2],target:"_blank"},"role moving forward"),"."),l.a.createElement(m.a,{by:l.a.createElement("a",{href:E[3],style:{textDecoration:"none"}},"@raganwald")},"For all intents and purposes, JavaScript has merged CoffeeScript into master. \u2028I call that a victory for making things and trying them out."),l.a.createElement(s.a,null,"Instead of making a thorough review of ",l.a.createElement("a",{href:E[4],target:"_blank"},"all the new features"),", I’ll point out the most interesting ones. To incentivize developers to upgrade, new languages or frameworks need to (1) feature a compelling compatibility story and (2) give you a ",l.a.createElement("a",{href:E[5],target:"_blank"},"big enough carrot"),"."),l.a.createElement(h.a,{id:"the-module-syntax"},"The module syntax"),l.a.createElement(s.a,null,"ES6 introduces ",l.a.createElement("b",null,"syntax")," for defining modules and declaring dependencies. I emphasize the word syntax because ES6 is not concerned with the actual implementation details of how modules are fetched or loaded."),l.a.createElement(s.a,null,"This further strengthens the ",l.a.createElement("b",null,"interoperability")," between the different contexts in which JavaScript can be executed."),l.a.createElement(s.a,null,"Up to now, no guidelines existed for how to actually do this. A common approach is to introduce a function declaration:"),l.a.createElement(s.a,null,"Consider as an example the simple task of writing a reusable implementation of ",l.a.createElement("a",{target:"_blank",href:E[6]},"CRC32")," in JavaScript."),l.a.createElement(s.a,null,"Up to now, no guidelines existed for how to actually do this. A common approach is to introduce a function declaration:"),l.a.createElement(p.a,null,"function crc32 () {\n  // …\n}"),l.a.createElement(s.a,null,"With the caveat, of course, that it introduces a single fixed global name that other parts of the code will have to refer to. And from the perspective of the code that uses that ",l.a.createElement(f.a,null,"crc32")," function, there’s no way to declare the dependency. One just has to assume the function will exist prior to the code’s interpretation."),l.a.createElement(s.a,null,"With this situation in mind, Node.JS led the way with the introduction of the ",l.a.createElement(f.a,null,"require")," runtime function and the ",l.a.createElement(f.a,null,"module.exports")," and ",l.a.createElement(f.a,null,"exports")," objects. Despite succeeding in creating a thriving ecosystem of modules around it, the interoperability possibilities were still somewhat limited."),l.a.createElement(s.a,null,"A common scenario to illustrate this is the generation of browser bundles of modules, with tools like ",l.a.createElement("a",{href:E[7],target:"_blank"},"browserify")," or ",l.a.createElement("a",{href:E[8],target:"_blank"},"webpack"),". These can only be conceived because they treat ",l.a.createElement(f.a,null,"require()")," as syntax, effectively ridding it of its inherent dynamism."),l.a.createElement(s.a,null,"If you’re trying to transport code to the browser, the following is not subject to static analysis and therefore breaks:"),l.a.createElement(p.a,null,"require(woot() + ‘_module.js’)"),l.a.createElement(s.a,null,"In other words, the packer’s algorithm can’t possibly know what ",l.a.createElement(f.a,null,"woot()")," means ahead of time."),l.a.createElement(s.a,null,"ES6 has introduced the right set of restrictions while accomodating for most existing use cases, drawing inspiration from most of the informally-specified ad-hoc module systems out there, like jQuery’s ",l.a.createElement(f.a,null,"$"),"."),l.a.createElement(s.a,null,"The syntax does take some getting used to. The most common pattern for dependency definitions is surprisingly impractical."),l.a.createElement(s.a,null,"The following code:"),l.a.createElement(p.a,null,"import crc32 from ‘crc32’"),l.a.createElement(s.a,null,"works for"),l.a.createElement(p.a,null,"export default function crc32(){}"),l.a.createElement(s.a,null,"but not for"),l.a.createElement(p.a,null,"export function crc32()"),l.a.createElement(s.a,null,"the latter is considered a ",l.a.createElement("em",null,"named export")," and requires the ",l.a.createElement(f.a,null,"{ }")," syntax in the import statement:"),l.a.createElement(p.a,null,"import { crc32 } from ‘crc32’"),l.a.createElement(s.a,null,"In other words, the simplest (and arguably most desirable) form of module definition requires the extra default keyword. Or in the absence of that, the usage of ",l.a.createElement(f.a,null,"{ }")," when importing."),l.a.createElement(h.a,{id:"destructuring"},"Destructuring"),l.a.createElement(s.a,null,"One of the most common patterns that has emerged in modern JavaScript code is the usage of option objects."),l.a.createElement(s.a,null,"So common is this practice that newly specified browser APIs, like WHATWG’s ",l.a.createElement("a",{href:E[9],target:"_blank"},"fetch")," (a modern substitute for XMLHttpRequest) follow it:"),l.a.createElement(p.a,null,"fetch(‘/users’, {\n  method: ‘POST’,\n  headers: {\n    Accept: ‘application/json’,\n    ‘Content-Type’: ‘application/json’\n  },\n  body: JSON.stringify({\n    first: ‘Guillermo’,\n    last: ‘Rauch’\n  })\n})"),l.a.createElement(s.a,null,"The widespread adoption of this pattern has effectively prevented the JavaScript ecosystem from falling into ",l.a.createElement("a",{href:E[10],target:"_blank"},"The Boolean Trap"),"."),l.a.createElement(s.a,null,"If said API accepted regular parameters as opposed to an options object, calling fetch would be an exercise in argument order memorization and the typing of the ",l.a.createElement(f.a,null,"null")," keyword."),l.a.createElement(p.a,null,"// artistic rendition of a nightmare alternative world\nfetch(‘/users’, ‘POST’, null, null, {\n  Accept: ‘application/json’,\n  ‘Content-Type’: ‘application/json’\n}, null, JSON.stringify({\n  first: ‘Guillermo’,\n  last: ‘Rauch’\n}))"),l.a.createElement(s.a,null,"On the implementation side of things, however, things haven’t looked nearly as pretty. Looking at the function’s declaration signature is no longer descriptive of its input’s possibilities:"),l.a.createElement(p.a,null,"\nfunction fetch(url, opts){\n  // …\n}"),l.a.createElement(s.a,null,"Usually followed by the manual assignment of defaults to local variables:"),l.a.createElement(p.a,null,"opts = opts || {}\nvar body = opts.body || ''\nvar headers = opts.headers || {}\nvar method = opts.method || 'GET'"),l.a.createElement(s.a,null,"And unfortunately for us, despite being common, the ",l.a.createElement(f.a,null,"||")," practice actually introduces subtle bugs. In this case we’re not admitting that ",l.a.createElement(f.a,null,"opts.body")," could be 0, so robust code would most likely look like:"),l.a.createElement(p.a,null,"var body = opts.body === undefined ? '' : opts.body"),l.a.createElement(s.a,null,"Thanks to destructured parameters we can at once clearly define the parameters, properly set defaults and expose them to the local scope:"),l.a.createElement(p.a,null,"fetch(url, { body='', method='GET', headers={} }){\n  console.log(method) // no opts. everywhere!\n"),l.a.createElement(s.a,null,"As a matter of fact, defaults can also apply to the entire object parameter as well:"),l.a.createElement(p.a,null,"fetch(url, { method='GET' } = {}){\n  // the second parameter defaults to {}\n  // the following will output \"GET\":\n  console.log(method)\n}"),l.a.createElement(s.a,null,"You can also destructure with the assignment operator as follows:"),l.a.createElement(p.a,null,"var { method, body } = opts"),l.a.createElement(s.a,null,"This is reminiscent to me of the expressiveness granted by ",l.a.createElement(f.a,null,"with"),", without the magic or negative performance implications."),l.a.createElement(h.a,{id:"new-conventions"},"New Conventions"),l.a.createElement(s.a,null,"Some parts of the language have been altogether replaced with better alternatives that’ll quickly become a new default for how you write JavaScript."),l.a.createElement(s.a,null,"I’ll go over some of them."),l.a.createElement(h.b,{id:"let-and-const-over-var"},"let/const over var"),l.a.createElement(s.a,null,"Instead of writing ",l.a.createElement(f.a,null,"var x = y")," you’ll most likely be writing ",l.a.createElement(f.a,null,"let x = y"),". let scopes your variable definition to the block it’s defined in:"),l.a.createElement(p.a,null,"if (foo) {\n  let x = 5\n  setTimeout(function(){\u2028\n    // x is `5` here\u2028  \n  }, 500)\n}\n// x is `undefined` here"),l.a.createElement(s.a,null,"This is especially useful for ",l.a.createElement(f.a,null,"for")," or ",l.a.createElement(f.a,null,"while")," loops:"),l.a.createElement(p.a,null,"for (let i = 0; i < 10; i++) {}\n// `i` doesn't exist here."),l.a.createElement(s.a,null,"When you want to ensure ",l.a.createElement("a",{href:"https://mathiasbynens.be/notes/es6-const",target:"_blank"},"binding immutability")," with the same semantics as ",l.a.createElement(f.a,null,"let"),", use ",l.a.createElement(f.a,null,"const")," instead."),l.a.createElement(h.b,{id:"template-strings"},"template strings over concatenation"),l.a.createElement(s.a,null,"With the lack of ",l.a.createElement(f.a,null,"sprintf")," or similar utilities in the standard JavaScript library, composing strings has always been more painful than it should."),l.a.createElement(s.a,null,"Template strings make the embedding of expressions trivial, as well as support for multiple lines. Simply replace ",l.a.createElement(f.a,null,"‘")," with ",l.a.createElement(f.a,null,"`"),"."),l.a.createElement(p.a,null,"let str = `\n  Hello ${first}. \n  We are in the year ${new Date().getFullYear()}\n`"),l.a.createElement(h.b,{id:"class-over-prototypes"},"class over prototypes"),l.a.createElement(s.a,null,"Defining a class was cumbersome and required a deep understanding of the language internals. Even though it’s still obviously useful to grasp the inner-workings, the barrier to entry to newcomers was unnecessarily high."),l.a.createElement(s.a,null,l.a.createElement(f.a,null,"class")," offers syntax sugar for defining a constructor ",l.a.createElement(f.a,null,"function"),", the methods within ",l.a.createElement(f.a,null,"prototype")," and getters / setters. It also provides prototypical inheritance with syntax alone (no utilities or 3rd party modules)."),l.a.createElement(p.a,null,"class A extends B {\n  constructor(){}\n  method(){}\n  get prop(){}\n  set prop(){}\n}"),l.a.createElement(s.a,null,"I initially was surprised to learn classes are not hoisted (explanation ",l.a.createElement("a",{href:E[11],target:"_blank"},"here"),"). You should therefore think of them translating roughly to ",l.a.createElement(f.a,null,"var A = function(){}")," as opposed to ",l.a.createElement(f.a,null,"function A(){}"),"."),l.a.createElement(h.b,{id:"fat-arrow-over-function"},"()=> over function"),l.a.createElement(s.a,null,"Not only is ",l.a.createElement(f.a,null,"(x, y) => {}")," shorter to write than ",l.a.createElement(f.a,null,"function (x,y) {}"),", but the behavior of this within the function body will most likely refer to what you want."),l.a.createElement(s.a,null,"The so-called “fat arrow” functions are ",l.a.createElement("em",null,"lexically bound"),". Consider the example of a method within a class that launches two timers:"),l.a.createElement(p.a,null,"class Person {\n  constructor(name){\n    this.name = name\n  }\n\n  timers(){\n    setTimeout(function(){\n      console.log(this.name)\n    }, 100)\n\n    setTimeout(() => {\n      console.log(this.name)\n    }, 100)\n  }\n}"),l.a.createElement(s.a,null,"To the dismay of newcomers to the language, the first timer (using ",l.a.createElement(f.a,null,"function"),") will log ",l.a.createElement(f.a,null,'"undefined"'),". The second one will now correctly log name."),l.a.createElement(h.a,{id:"async-io"},"First-class support for async I/O"),l.a.createElement(s.a,null,"Asynchronous code execution has been around for almost the entire history of the language. ",l.a.createElement(f.a,null,"setTimeout"),", after all, was introduced around the time JavaScript 1.0 came out."),l.a.createElement(s.a,null,"But arguably, the language didn’t ",l.a.createElement("em",null,"really support")," it. The return value of function calls that scheduled “future work” is normally ",l.a.createElement(f.a,null,"undefined"),", or in the case of ",l.a.createElement(f.a,null,"setTimeout")," a ",l.a.createElement(f.a,null,"Number"),"."),l.a.createElement(s.a,null,"The introduction of ",l.a.createElement(f.a,null,"Promise")," addresses this, and by doing so fills a very large hole of interoperability and ",l.a.createElement("a",{href:E[12],target:"_blank"},"composability"),"."),l.a.createElement(s.a,null,"On one hand, APIs you’ll encounter become wholly more predictable. As a test of this, consider the new ",l.a.createElement(f.a,null,"fetch")," API. How does it work beyond the signature we described? You guessed right. It returns a ",l.a.createElement(f.a,null,"Promise"),"."),l.a.createElement(s.a,null,"If you’ve used Node.JS in the past, you know that there’s an informal contract that callbacks will follow the signature:"),l.a.createElement(p.a,null,"function (err, result){}"),l.a.createElement(s.a,null,"Also informally specified is the idea that callbacks will fire ",l.a.createElement("em",null,"only once"),". And that ",l.a.createElement(f.a,null,"null")," will be the value in the absence of an error (and not ",l.a.createElement(f.a,null,"undefined")," or ",l.a.createElement(f.a,null,"false"),"). Except, this might not always ",l.a.createElement("a",{href:E[13],target:"_blank"},"be the case"),"."),l.a.createElement(h.a,{id:"towards-the-future"},"Towards the future"),l.a.createElement(s.a,null,"ES6 is gaining a lot of momentum in the ecosystem. ",l.a.createElement("a",{href:E[14],target:"_blank"},"Chrome")," and "," ",l.a.createElement("a",{href:E[15],target:"_blank"},"io.js")," have already incorporated some of its features. A lot has already been written about it."),l.a.createElement(s.a,null,"But what’s worth pointing out is that this momentum has been largely enabled by ",l.a.createElement("em",null,"transpilation")," rather than actual support. ",l.a.createElement("a",{href:E[16],target:"_blank"},"Great tools")," have emerged to enable transpiling and polyfilling, and browsers have over time added proper debugging and error reporting support for them (through source maps)."),l.a.createElement(s.a,null,"The evolution of the language and its proposed features are outpacing implementation. As mentioned above, ",l.a.createElement(f.a,null,"Promise")," is genuinely exciting as a building block alone, but consider the benefits of solving ",l.a.createElement("a",{href:E[17],target:"_blank"},"the callback problem")," once and for all."),l.a.createElement(s.a,null,l.a.createElement("b",null,"ES7")," is poised to do this by introducing the possibility of ",l.a.createElement(f.a,null,"await"),"-ing a promise:"),l.a.createElement(p.a,null,"async function uploadAvatar(){\n  let user = await getUser()\n  user.avatar = await getAvatar()\n  return await user.save()\n}"),l.a.createElement(s.a,null,"Even though the spec is in its ",l.a.createElement("a",{href:E[18],target:"_blank"},"early discussions"),", the same tool that compiles ES6 to ES5 already ",l.a.createElement("a",{href:E[19],target:"_blank"},"enables it"),"."),l.a.createElement(s.a,null,"There’s still substantial work left to do to make sure the process of adopting new language syntax and APIs becomes even more friction-less to those getting started."),l.a.createElement(s.a,null,"But one thing is for certain: we must embrace the moving target."),l.a.createElement(d.a,null,l.a.createElement(d.b,{id:"1"},"I use the word “transpilation” throughout the article on the basis of its popularity to refer to JavaScript source-to-source compilation. That aside, the merits of the term are ",l.a.createElement("a",{href:E[0],target:"_blank"},"technically debatable"),".")))});var E=["https://twitter.com/fogus/status/550717447163355136","http://www.sigcomm.org/sites/default/files/ccr/papers/2008/January/1341431-1341436.pdf","https://github.com/jashkenas/coffeescript/issues/3859","https://twitter.com/raganwald/status/555386257233027073","https://github.com/lukehoban/es6features","http://teddziuba.tumblr.com/post/26426290981/python-3s-marketing-problem","http://en.wikipedia.org/wiki/Cyclic_redundancy_check","http://browserify.org/","https://github.com/webpack/webpack","https://fetch.spec.whatwg.org/","http://ariya.ofilabs.com/2011/08/hall-of-api-shame-boolean-trap.html","https://esdiscuss.org/history/2014-06-05T15%3A54%3A16.000Z-rossberg.google.com?path=%2Ftopic%2Fin-es6-strict-mode-do-function-declarations-within-a-block-hoist","https://blog.jcoglan.com/2011/03/11/promises-are-the-monad-of-asynchronous-programming/","https://medium.com/code-adventures/farewell-node-js-4ba9e7f3e52b#7cda","https://twitter.com/addyosmani/status/541978036904554496","https://iojs.org/en/es6.html","http://babeljs.io/","http://tirania.org/blog/archive/2013/Aug-15.html","https://esdiscuss.org/notes/2014-01-30#async-await","http://babeljs.io/docs/usage/transformers/#async-to-generator"]},52:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"b",function(){return u});var n=a(1),l=a.n(n),r=a(0),o=a.n(r);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var s=function(e){var t=e.id,a=e.level,n=void 0===a?2:a,r=e.fontSize,i=void 0===r?16:r,s=e.children;return o.a.createElement("div",{className:"jsx-3001872643"},o.a.createElement("h".concat(n),{style:{fontWeight:500,fontSize:i}},o.a.createElement("span",{className:"jsx-3001872643"},o.a.createElement("a",{href:"#".concat(t),id:t,className:"jsx-3001872643"},"#")),s),o.a.createElement(l.a,{styleId:"3001872643",css:['div.jsx-3001872643{margin:25px 0;font-family:Helvetica Neue,Helvetica,Arial, "Lucida Grande",sans-serif;}',"span.jsx-3001872643{position:absolute;margin-left:-15px;width:15px;}","a.jsx-3001872643{visibility:hidden;}","div.jsx-3001872643:hover a.jsx-3001872643,span.jsx-3001872643:hover a.jsx-3001872643{visibility:visible;}"]}))},c=s,u=function(e){return s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){i(e,t,a[t])})}return e}({},e,{level:3,fontSize:14}))}}},[310]).default}});